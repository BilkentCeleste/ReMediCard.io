<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
  <script>
    const params = new URLSearchParams(window.location.search);
    const sharedItem = params.get('sharedItem');
    const shareToken = params.get('shareToken');

    let path = '';
    if (sharedItem === 'quiz') {
      path = 'sharedquiz';
    } else if (sharedItem === 'deck') {
      path = 'shareddeck';
    } else {
      path = 'home';
    }

    const appUrl = `myapp://${path}?shareToken=${shareToken}`;

    console.log("Redirecting to:", appUrl);

    window.location.href = appUrl;

    setTimeout(() => {
      const fallbackDiv = document.getElementById('fallback');
      const fallbackLink = document.getElementById('fallback-link');
      fallbackLink.href = appUrl;
      fallbackDiv.style.display = 'block';
    }, 2000);
  </script>
</head>
<body>
<p>Opening app ReMediCard.io...</p>
<div id="fallback" style="display:none;">
  <p>If nothing happens, <a id="fallback-link" href="#">tap here</a>.</p>
</div>
</body>
</html>
